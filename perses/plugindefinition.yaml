apiVersion: greenhouse.sap/v1alpha1
kind: PluginDefinition
metadata:
  name: perses
spec:
  version: 0.3.0
  displayName: Perses
  description: "Perses is a dashboard tooling to visualize metrics and traces produced by observability tools such as Prometheus/Thanos/Jaeger"
  docMarkDownUrl: https://raw.githubusercontent.com/cloudoperators/greenhouse-extensions/main/perses/README.md
  icon: https://raw.githubusercontent.com/cloudoperators/greenhouse-extensions/main/perses/logo.png
  helmChart:
      name: perses
      repository: oci://ghcr.io/cloudoperators/greenhouse-extensions/charts
      version: '0.9.0'
  options:
    - default: true
      description: "Deploys a sidecar container to watch all configmaps in the cluster and filters out the ones with a label `perses.dev/resource: true`. The files defined in those configmaps are written to a folder and this folder is accessed by Perses. Changes to the configmaps are continuously monitored and reflected in Perses within 10 seconds"
      name: perses.sidecar.enabled
      required: true
      type: bool
    - description: "With this config, the Perses app will be served with the path <api_prefix>/api"
      name: perses.api_prefix
      required: false
      type: string
    - description: "The image version of the Perses app. If not provided, the latest version will be used"
      name: perses.image.version
      required: false
      type: string
