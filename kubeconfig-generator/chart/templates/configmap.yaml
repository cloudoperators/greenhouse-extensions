apiVersion: v1
kind: ConfigMap
metadata:
  name: kubeconfig-generator
  namespace: {{ .Release.Namespace }}
data:
  config.yaml: |
    {{ range $org, $cfg := .Values.config -}}
    {{ $org -}}:
      authUrl: {{ $cfg.authUrl | quote }}
      region: {{ $cfg.region | quote }}
      username: {{ $cfg.username | quote }}
      password: ${SWIFT_PASSWORD_{{- $org | upper -}} }
      domainName: {{ $cfg.doaminName | quote }}
      projectId: {{ $cfg.projectId | quote }}
      container: {{ $cfg.container | quote }}
    {{ end -}}
