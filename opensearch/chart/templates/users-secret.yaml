# SPDX-FileCopyrightText: 2024 SAP SE or an SAP affiliate company and Greenhouse contributors
# SPDX-License-Identifier: Apache-2.0

{{- $labels := include "opensearch-cluster-local.labels" . }}
{{/*
WARNING: defaultPasswords are dummy passwords for development only!
MUST be overridden for production environments!
*/}}
{{- $defaultPasswords := dict "logs" "DUMMY-LogsUser2025!@#" "logs2" "DUMMY-FailoverUser2025$%^" }}
{{- range $username, $credentials := .Values.cluster.usersCredentials }}
---
apiVersion: v1
kind: Secret
metadata:
  name: {{ $username }}-credentials
  labels: {{ $labels | nindent 4 }}
type: Opaque
data:
  username: {{ default $username $credentials.username | b64enc }}
  password: {{ default (index $defaultPasswords $username) $credentials.password | b64enc }}
{{- end }}
